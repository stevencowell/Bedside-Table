<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="description" content="Stage 5 Industrial Technology Timber - Bedside Table Project - 2025" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bedside Table Project</title>
  <style>
    /* General Styles */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      background-color: #f4f4f4;
    }
    a {
      text-decoration: none;
      color: inherit;
      cursor: pointer;
    }
    h1, h2, h3, h4, h5 {
      margin: 0 0 10px 0;
    }
    /* HEADER SECTION STYLES */
    header {
      background: #007bff;
      color: #fff;
      padding: 20px;
      text-align: center;
    }
    header h1 {
      font-size: 2.5em;
    }
    header p {
      font-size: 1.2em;
    }
    /* NAVIGATION STYLES */
    nav {
      display: flex;
      justify-content: center;
      background: #0056b3;
      flex-wrap: wrap;
    }
    nav a {
      padding: 15px 20px;
      color: #fff;
      display: inline-block;
      transition: background 0.3s;
    }
    nav a:hover, nav a.active {
      background: #003f80;
    }
    /* GOOGLE CLASSROOM SECTION STYLES */
    .google-classroom {
      background: #fffbcc;
      padding: 20px;
      text-align: center;
      border: 1px solid #e0e0e0;
      margin: 20px auto;
      width: 90%;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      border-radius: 5px;
    }
    .google-classroom h2 {
      color: #007bff;
    }
    .google-classroom p {
      font-size: 1.1em;
    }
    .google-classroom a {
      display: inline-block;
      background: #007bff;
      color: #fff;
      padding: 10px 20px;
      margin-top: 10px;
      border-radius: 5px;
      font-weight: bold;
      transition: background 0.3s;
    }
    .google-classroom a:hover {
      background: #0056b3;
    }
    /* NEW: Google Image Styles */
    .google-image {
      text-align: center;
      margin: 20px 0;
    }
    .google-image img {
      max-width: 400px;
      width: 100%;
      height: auto;
      border-radius: 5px;
    }
    /* MAIN CONTENT STYLES */
    main.content {
      padding: 20px;
    }
    .content-section {
      display: none; /* Hidden by default; activated via JS */
      background: #fff;
      margin: 10px auto;
      padding: 20px;
      width: 90%;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      border-radius: 5px;
    }
    .content-section.active {
      display: block;
    }
    .content-section h2 {
      color: #007bff;
      margin-bottom: 15px;
      border-bottom: 2px solid #f4f4f4;
      padding-bottom: 5px;
    }
    .content-section h3 {
      margin-top: 20px;
      color: #333;
    }
    .content-section h4 {
      margin-top: 15px;
      color: #555;
    }
    .content-section p, .content-section li {
      margin-bottom: 10px;
    }
    .content-section ul, .content-section ol {
      margin: 10px 0 15px 20px;
    }
    .content-section details {
      background: #e9ecef;
      margin: 10px 0;
      padding: 10px;
      border-radius: 4px;
    }
    .content-section summary {
      cursor: pointer;
      font-size: 1.05em;
    }
    .content-section summary::-webkit-details-marker {
      color: #007bff;
    }
    .content-section details p {
      margin: 5px 0;
    }
    .resource-links ul {
      list-style: none;
      padding: 0;
    }
    .resource-links li {
      margin: 5px 0;
    }
    .resource-links a {
      color: blue;
    }
    /* Styles for quiz feedback */
    .quiz label[data-result="right"] {
        color: green;
        font-weight: bold;
    }
    .quiz label[data-result="wrong"] {
        color: red;
        text-decoration: line-through;
    }
    .quiz-msg {
        display: block;
        margin-top: 10px;
        font-weight: bold;
    }
    /* Style for audio buttons */
    .quiz button[aria-label^="Read"] {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1em;
        padding: 0 5px;
        vertical-align: middle;
    }

    /* Ensure all list texts are bold (except quiz lists) */
    .content-section ul li,
    .content-section ol li,
    .resource-links ul li {
      font-weight: bold;
    }
    /* Keep quiz list items normal weight */
    .quiz li {
      font-weight: normal;
    }
    .resource-links a {
      font-weight: bold;
    }



/* Ensure all summary headings (list links) are bold */
summary { font-weight: bold; }

  

  /* Make all textareas taller & wider */
  textarea { min-height: 140px; width: 95%; max-width: 900px; }
  .wide-textarea { width: 98%; max-width: 1000px; }

    /* Popup box styles */
    .popup-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .popup-overlay.active {
      display: flex;
    }
    .popup-box {
      background: #fff;
      padding: 20px;
      border-radius: 5px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      position: relative;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }
    .popup-box a {
      display: inline-block;
      margin-top: 10px;
      background: #007bff;
      color: #fff;
      padding: 10px 15px;
      border-radius: 4px;
      font-weight: bold;
    }
    .popup-box button:not(.close-popup) {
      display: inline-block;
      margin-top: 10px;
      background: #007bff;
      color: #fff;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
    }
    .popup-box button:not(.close-popup):hover {
      background: #0056b3;
    }
    .popup-box button.close-popup {
      background: none;
      border: none;
      position: absolute;
      top: 5px;
      right: 10px;
      font-size: 1.2em;
      cursor: pointer;
    }

</style>

</head>
<body>
<header>
  <h1><b>Stage 5 Industrial Technology Timber - Bedside Table Project</b> - 2025</h1>
  <p>Resources, Projects, and Content for Learning</p>
  <div class="header-image">
    <!-- STAFF: Replace 'sample_project.png' with your project image -->
      <img src="table.png" alt="Bedside Table" style="max-width:300px; width:100%; margin-top:20px; border-radius:5px;" />
    <div class="plan-link" style="margin-top:10px;">
      <!-- STAFF: Update link to your project's plan PDF -->
      <a href="BedsideTablePlan.pdf" style="background:#28a745; color:#fff; padding:10px 15px; border-radius:4px; font-weight:bold; display:inline-block;" target="_blank">Download Project Plan (PDF)</a>
    </div>
  </div>
</header>

<section class="google-classroom" aria-label="Google Classroom Invitation">
  <h2>Join Our Google Classroom</h2>
  <p>Use the code below to join the class and access all online resources:</p>
  <p><strong>Classroom Code: <span style="color:#d9534f; font-size:1.3em;">bedside23</span></strong></p>
  <!-- STAFF: Update the Google Classroom link -->
  <a href="https://classroom.google.com" target="_blank">Join Google Classroom</a>
</section>

<nav aria-label="Main Navigation">
  <a class="nav-link active" data-section="program" href="#program">Subject Program</a>
  <a class="nav-link" data-section="syllabus" href="#syllabus">Syllabus</a>
  <a class="nav-link" data-section="assessment" href="#assessment">Assessments</a>
  <a class="nav-link" data-section="project-unit" href="#project-unit">Bedside Table Project Unit</a>
  <a class="nav-link" data-section="main-theory" href="#main-theory">Main Theory Content</a>
  <a class="nav-link" data-section="support-activities" href="#support-activities">Support Theory Content (Optional)</a>
  <a class="nav-link" data-section="advanced-activities" href="#advanced-activities">Advanced Theory Content (Optional)</a>
</nav>

<main class="content">

<main class="content">
<details>
          <summary><strong>Week 17:</strong> Portfolio Presentation and Project Evaluation</summary>
          <article>
            <h4>Theory Content</h4>
            <p>Week 17 focuses on presenting your project portfolio and conducting thorough evaluations. Effectively presenting your project and evaluating the final product and processes are crucial for reflecting on your learning outcomes and identifying areas for future improvement.</p>
            <h4>Portfolio Presentation</h4>
            <p>Your portfolio should clearly demonstrate your project's development from initial planning through final completion:</p>
            <ul>
              <li><b>Documentation:</b> Include detailed design sketches, orthogonal drawings, photographs of the assembly process, and records of materials and costs.</li>
              <li><b>Reflection:</b> Clearly articulate your design decisions, challenges encountered, and how you overcame these obstacles.</li>
              <li><b>Professional Presentation:</b> Ensure the portfolio is neatly organised, clearly labelled, and professionally presented.</li>
            </ul>
            <h4>Project Evaluation</h4>
            <p>Evaluating your project involves critically analysing several key aspects:</p>
            <ul>
              <li><b>Quality and Finish:</b> Assess craftsmanship, joinery precision, and finishing quality.</li>
              <li><b>Functionality:</b> Ensure your bedside table performs its intended function effectively.</li>
              <li><b>Design Aesthetics:</b> Critically review visual appeal and design coherence.</li>
              <li><b>Sustainability and Efficiency:</b> Evaluate materials used, waste management, and eco-friendly practices.</li>
            </ul>
            <h4>Practical Activity</h4>
            <ul>
              <li>Finalise and professionally present your portfolio, ensuring clarity and detail.</li>
              <li>Complete a comprehensive project evaluation report, outlining successes, challenges, and areas for improvement.</li>
            </ul>
            <h4>Resources</h4>
            <div class="resource-links">
              <ul>
                <li><a href="https://www.youtube.com/watch?v=1W4ifilA-3U" target="_blank">Portfolio Presentation Tips (YouTube)</a></li>
                <li><a href="https://www.finewoodworking.com/2008/05/08/how-to-evaluate-your-work" target="_blank">Evaluating Woodworking Projects</a></li>
              </ul>
            </div>
            <form class="quiz" data-week="17" id="week17-quiz" style="margin-top: 1.5rem;">
              <fieldset>
                <legend><strong>Have you been paying attention? – Week 17 Quiz</strong></legend>
                <ol>
                  <li>
                    <p>Why is it important to include detailed documentation in your portfolio? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                    <label data-correct="true"><input name="q1_17" type="radio" value="Showcase"/> To effectively showcase your project's development stages and decisions. <button aria-label="Read answer To effectively showcase your project's development stages and decisions." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q1_17" type="radio" value="Size"/> To increase portfolio size. <button aria-label="Read answer To increase portfolio size." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q1_17" type="radio" value="Speed"/> To speed up portfolio creation. <button aria-label="Read answer To speed up portfolio creation." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q1_17" type="radio" value="Compliance"/> To comply with school regulations only. <button aria-label="Read answer To comply with school regulations only." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
                  </li>
                  <li>
                    <p>What should a critical reflection in your portfolio primarily demonstrate? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                    <label><input name="q2_17" type="radio" value="Speed"/> How quickly you finished the project. <button aria-label="Read answer How quickly you finished the project." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label data-correct="true"><input name="q2_17" type="radio" value="Challenges"/> Your understanding and resolution of project challenges and decisions. <button aria-label="Read answer Your understanding and resolution of project challenges and decisions." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q2_17" type="radio" value="Materials"/> The materials used only. <button aria-label="Read answer The materials used only." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q2_17" type="radio" value="Cost"/> The total cost of the project. <button aria-label="Read answer The total cost of the project." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
                  </li>
                  <li>
                    <p>When evaluating your project's quality, what is the key focus area? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                    <label><input name="q3_17" type="radio" value="Time"/> The total time spent. <button aria-label="Read answer The total time spent." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q3_17" type="radio" value="People"/> The number of people involved. <button aria-label="Read answer The number of people involved." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label data-correct="true"><input name="q3_17" type="radio" value="Precision"/> The precision of joinery and overall finish quality. <button aria-label="Read answer The precision of joinery and overall finish quality." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q3_17" type="radio" value="Weight"/> The final weight of the project. <button aria-label="Read answer The final weight of the project." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
                  </li>
                  <li>
                    <p>Why should sustainability be considered in project evaluations? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                    <label data-correct="true"><input name="q4_17" type="radio" value="Impact"/> To assess environmental impact and encourage responsible practices. <button aria-label="Read answer To assess environmental impact and encourage responsible practices." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q4_17" type="radio" value="Documentation"/> To reduce project documentation. <button aria-label="Read answer To reduce project documentation." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q4_17" type="radio" value="Speed"/> To speed up construction. <button aria-label="Read answer To speed up construction." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q4_17" type="radio" value="Cost"/> To lower project costs. <button aria-label="Read answer To lower project costs." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
                  </li>
                  <li>
                    <p>Which component is essential for a professional portfolio presentation? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                    <label data-correct="true"><input name="q5_17" type="radio" value="Organisation"/> Clear organisation and detailed labelling. <button aria-label="Read answer Clear organisation and detailed labelling." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q5_17" type="radio" value="Pages"/> Maximum number of pages. <button aria-label="Read answer Maximum number of pages." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q5_17" type="radio" value="Colour"/> Extensive colour use only. <button aria-label="Read answer Extensive colour use only." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q5_17" type="radio" value="Minimal"/> Minimal written explanations. <button aria-label="Read answer Minimal written explanations." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
                  </li>
                  <li>
                    <p>Evaluating functionality involves what critical step? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                    <label><input name="q6_17" type="radio" value="Cost"/> Ensuring maximum cost-efficiency. <button aria-label="Read answer Ensuring maximum cost-efficiency." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label data-correct="true"><input name="q6_17" type="radio" value="Purpose"/> Checking the furniture performs its intended purpose effectively. <button aria-label="Read answer Checking the furniture performs its intended purpose effectively." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q6_17" type="radio" value="Visual"/> Assessing visual appeal only. <button aria-label="Read answer Assessing visual appeal only." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q6_17" type="radio" value="Time"/> Counting total assembly time. <button aria-label="Read answer Counting total assembly time." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
                  </li>
                  <li>
                    <p>What makes effective project evaluation valuable? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                    <label><input name="q7_17" type="radio" value="Quick"/> It quickly completes the project. <button aria-label="Read answer It quickly completes the project." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label data-correct="true"><input name="q7_17" type="radio" value="Improve"/> It identifies strengths and areas needing improvement clearly. <button aria-label="Read answer It identifies strengths and areas needing improvement clearly." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q7_17" type="radio" value="Size"/> It ensures portfolio size. <button aria-label="Read answer It ensures portfolio size." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q7_17" type="radio" value="Reduce"/> It reduces need for future projects. <button aria-label="Read answer It reduces need for future projects." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
                  </li>
                  <li>
                    <p>Why is visual appeal important to evaluate in your project? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                    <label><input name="q8_17" type="radio" value="Cost"/> It determines project cost. <button aria-label="Read answer It determines project cost." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label data-correct="true"><input name="q8_17" type="radio" value="Satisfaction"/> It impacts user satisfaction and overall design success. <button aria-label="Read answer It impacts user satisfaction and overall design success." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q8_17" type="radio" value="Reduce"/> It reduces environmental impact. <button aria-label="Read answer It reduces environmental impact." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q8_17" type="radio" value="Easier"/> It makes evaluation easier. <button aria-label="Read answer It makes evaluation easier." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
                  </li>
                  <li>
                    <p>How should your project evaluation address challenges encountered? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                    <label><input name="q9_17" type="radio" value="Ignore"/> By ignoring minor issues. <button aria-label="Read answer By ignoring minor issues." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label data-correct="true"><input name="q9_17" type="radio" value="Resolve"/> By critically analysing and describing how you resolved or adapted to these challenges. <button aria-label="Read answer By critically analysing and describing how you resolved or adapted to these challenges." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q9_17" type="radio" value="Brief"/> By documenting them briefly without solutions. <button aria-label="Read answer By documenting them briefly without solutions." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q9_17" type="radio" value="Blame"/> By blaming external factors. <button aria-label="Read answer By blaming external factors." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
                  </li>
                  <li>
                    <p>What aspect of project evaluation directly supports continuous improvement in woodworking skills? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                    <label data-correct="true"><input name="q10_17" type="radio" value="Growth"/> Identifying specific areas for future learning and growth. <button aria-label="Read answer Identifying specific areas for future learning and growth." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q10_17" type="radio" value="Success"/> Only noting successful outcomes. <button aria-label="Read answer Only noting successful outcomes." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q10_17" type="radio" value="Quick"/> Quickly finishing evaluations. <button aria-label="Read answer Quickly finishing evaluations." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                    <label><input name="q10_17" type="radio" value="Minimal"/> Minimising challenges documentation. <button aria-label="Read answer Minimising challenges documentation." onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
                  </li>
                </ol>
                <button class="check-btn" type="button" onclick="submitQuiz(this, 'bedside-week17')">Check answers</button>
                <span class="quiz-msg" id="week17-quiz-msg"></span>
              </fieldset>
            </form>
            <h4>Conclusion</h4>
            <p>Professional presentation and thoughtful evaluation showcase your accomplishments and highlight paths for improvement.</p>
          </article>
        </details>
</main>

<!-- Popup for results -->
<div id="resultPopup" class="popup-overlay" role="dialog" aria-modal="true">
  <div class="popup-box">
    <button class="close-popup" aria-label="Close">&times;</button>
    <h3>Results Submitted</h3>
    <p>You can now visit Google Classroom to record your work.</p>
    <!-- STAFF: Replace href with the project link when available -->
    <a id="popupClassroomLink" href="#" target="_blank">Open Google Classroom</a>
  </div>
</div>

<!-- Popup for entering name -->
<div id="namePopup" class="popup-overlay" role="dialog" aria-modal="true">
  <div class="popup-box">
    <label for="studentName"><b>Please enter your name:</b></label><br/>
    <input type="text" id="studentName" style="margin-top:10px; padding:8px; width:95%;" />
    <button id="submitNameBtn" style="margin-top:10px;">Submit</button>
  </div>
</div>

<script>
    // Script for handling navigation link clicks and toggling active sections
    document.addEventListener('DOMContentLoaded', () => {
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.content-section');

        // Function to set the active section based on URL hash or default
        function setActiveSection() {
            let targetID = window.location.hash.substring(1) || 'program';
            if (!document.getElementById(targetID)) {
                targetID = 'program';
            }

            navLinks.forEach(nav => {
                nav.classList.remove('active');
                if (nav.getAttribute('data-section') === targetID) {
                    nav.classList.add('active');
                }
            });
            sections.forEach(sec => {
                sec.classList.remove('active');
                if (sec.id === targetID) {
                    sec.classList.add('active');
                }
            });
        }

        // Set active section on page load
        setActiveSection();

        // Add click event listeners to navigation links
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetID = link.getAttribute('data-section');
                window.location.hash = targetID;

                navLinks.forEach(nav => nav.classList.remove('active'));
                sections.forEach(sec => sec.classList.remove('active'));

                link.classList.add('active');
                const targetSection = document.getElementById(targetID);
                if (targetSection) {
                    targetSection.classList.add('active');
                    targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Listen for hash changes (e.g., browser back/forward buttons)
        window.addEventListener('hashchange', setActiveSection);
    });
</script>
<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwTomPeDrZ-vDZyEC72wXeoeFpro0Z8zCD2OfgL9HxY7nBsokoieXxy4sT3n_O4x3iqhg/exec";
const CLASSROOM_LINK = "#"; // STAFF: Replace with your Google Classroom link

// Voice setup for text-to-speech
const synth = window.speechSynthesis;
let voices = [];
synth.onvoiceschanged = () => { voices = synth.getVoices(); };

function speakText(btn) {
  let text = '';
  if (btn.dataset.text) {
    text = btn.dataset.text;
  } else {
    const p = btn.closest('p');
    if (p) {
      text = Array.from(p.childNodes)
        .filter(n => n.nodeType === Node.TEXT_NODE)
        .map(n => n.textContent.trim())
        .join(' ');
    } else {
      const lbl = btn.closest('label');
      text = Array.from(lbl.childNodes)
        .filter(n => n.nodeType === Node.TEXT_NODE)
        .map(n => n.textContent.trim())
        .filter(t => t.length)
        .join(' ');
    }
  }
  if (!voices.length) voices = synth.getVoices();
  const utt = new SpeechSynthesisUtterance(text);
  utt.voice = voices.find(v => v.name === 'Google UK English Female')
             || voices.find(v => /Natural/.test(v.name))
             || voices[0];
  synth.speak(utt);
}

function showResultPopup(url) {
  const overlay = document.getElementById('resultPopup');
  const link = document.getElementById('popupClassroomLink');
  if (link) link.href = url || '#';
  if (overlay) overlay.classList.add('active');
}

function askForName() {
  return new Promise(resolve => {
    const overlay = document.getElementById('namePopup');
    const input = document.getElementById('studentName');
    const btn = document.getElementById('submitNameBtn');
    if (!overlay || !input || !btn) { resolve(''); return; }
    overlay.classList.add('active');
    btn.onclick = () => {
      const name = input.value.trim();
      if (!name) return;
      overlay.classList.remove('active');
      resolve(name);
    };
  });
}

document.addEventListener('DOMContentLoaded', () => {
  const closeBtn = document.querySelector('#resultPopup .close-popup');
  if (closeBtn) {
    closeBtn.addEventListener('click', () => {
      document.getElementById('resultPopup').classList.remove('active');
    });
  }
});

function submitQuiz(btn, quizType) {
  const form = btn.closest('form');
  const fieldset = form.querySelector('fieldset');
  let correct = 0, total = 0;
  const results = [];
  fieldset.querySelectorAll('li').forEach((li, idx) => {
    const radios = li.querySelectorAll('input[type=radio]');
    let userCorrect = false, answered = false;
    radios.forEach(radio => {
      if (radio.checked) {
        answered = true;
        if (radio.hasAttribute('data-correct')) userCorrect = true;
      }
      // Reset label
      radio.parentElement.removeAttribute('data-result');
    });
    total += 1;
    // Mark right/wrong visually
    radios.forEach(radio => {
      if (radio.checked) {
        radio.parentElement.setAttribute('data-result', userCorrect ? "right" : "wrong");
      }
    });
    if (userCorrect) correct += 1;
    results.push({
      question: li.querySelector('p').textContent,
      answer: Array.from(radios).find(r => r.checked)?.value || ''
    });
  });
  // Show feedback
  let msg = `You got ${correct} out of ${total} correct.`;
  form.querySelector('.quiz-msg').textContent = msg;

  askForName().then(name => {
    fetch(SCRIPT_URL, {
      method: "POST",
      mode: "cors",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        quizType,
        quiz: results,
        score: correct + "/" + total,
        studentName: name,
        timestamp: new Date().toISOString()
      })
    });
    showResultPopup(CLASSROOM_LINK);
  });
}

function submitAdvancedQuiz(btn, quizType) {
  const form = btn.closest('form');
  const textareas = form.querySelectorAll('textarea');
  const responses = [];
  textareas.forEach((ta) => {
    responses.push({
      question: ta.closest('li').querySelector('p').textContent,
      answer: ta.value.trim()
    });
  });

  const studentName = prompt('Please enter your name to submit your answers:');
  if (!studentName) return;

  form.querySelector('.quiz-msg').textContent =
    'Responses submitted. Your teacher will review them.';

  fetch(SCRIPT_URL, {
    method: 'POST',
    mode: 'cors',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      quizType,
      studentName: studentName.trim(),
      responses,
      timestamp: new Date().toISOString()
    })
  });
  showResultPopup(CLASSROOM_LINK);
}
</script>
</body>
</html>
