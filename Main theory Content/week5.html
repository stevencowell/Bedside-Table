<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="description" content="Stage 5 Industrial Technology Timber - Bedside Table Project - 2025" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bedside Table Project</title>
  <style>
    /* General Styles */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      background-color: #f4f4f4;
    }
    a {
      text-decoration: none;
      color: inherit;
      cursor: pointer;
    }
    h1, h2, h3, h4, h5 {
      margin: 0 0 10px 0;
    }
    /* HEADER SECTION STYLES */
    header {
      background: #007bff;
      color: #fff;
      padding: 20px;
      text-align: center;
    }
    header h1 {
      font-size: 2.5em;
    }
    header p {
      font-size: 1.2em;
    }
    /* NAVIGATION STYLES */
    nav {
      display: flex;
      justify-content: center;
      background: #0056b3;
      flex-wrap: wrap;
    }
    nav a {
      padding: 15px 20px;
      color: #fff;
      display: inline-block;
      transition: background 0.3s;
    }
    nav a:hover, nav a.active {
      background: #003f80;
    }
    /* GOOGLE CLASSROOM SECTION STYLES */
    .google-classroom {
      background: #fffbcc;
      padding: 20px;
      text-align: center;
      border: 1px solid #e0e0e0;
      margin: 20px auto;
      width: 90%;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      border-radius: 5px;
    }
    .google-classroom h2 {
      color: #007bff;
    }
    .google-classroom p {
      font-size: 1.1em;
    }
    .google-classroom a {
      display: inline-block;
      background: #007bff;
      color: #fff;
      padding: 10px 20px;
      margin-top: 10px;
      border-radius: 5px;
      font-weight: bold;
      transition: background 0.3s;
    }
    .google-classroom a:hover {
      background: #0056b3;
    }
    /* NEW: Google Image Styles */
    .google-image {
      text-align: center;
      margin: 20px 0;
    }
    .google-image img {
      max-width: 400px;
      width: 100%;
      height: auto;
      border-radius: 5px;
    }
    /* MAIN CONTENT STYLES */
    main.content {
      padding: 20px;
    }
    .content-section {
      display: none; /* Hidden by default; activated via JS */
      background: #fff;
      margin: 10px auto;
      padding: 20px;
      width: 90%;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      border-radius: 5px;
    }
    .content-section.active {
      display: block;
    }
    .content-section h2 {
      color: #007bff;
      margin-bottom: 15px;
      border-bottom: 2px solid #f4f4f4;
      padding-bottom: 5px;
    }
    .content-section h3 {
      margin-top: 20px;
      color: #333;
    }
    .content-section h4 {
      margin-top: 15px;
      color: #555;
    }
    .content-section p, .content-section li {
      margin-bottom: 10px;
    }
    .content-section ul, .content-section ol {
      margin: 10px 0 15px 20px;
    }
    .content-section details {
      background: #e9ecef;
      margin: 10px 0;
      padding: 10px;
      border-radius: 4px;
    }
    .content-section summary {
      cursor: pointer;
      font-size: 1.05em;
    }
    .content-section summary::-webkit-details-marker {
      color: #007bff;
    }
    .content-section details p {
      margin: 5px 0;
    }
    .resource-links ul {
      list-style: none;
      padding: 0;
    }
    .resource-links li {
      margin: 5px 0;
    }
    .resource-links a {
      color: blue;
    }
    /* Styles for quiz feedback */
    .quiz label[data-result="right"] {
        color: green;
        font-weight: bold;
    }
    .quiz label[data-result="wrong"] {
        color: red;
        text-decoration: line-through;
    }
    .quiz-msg {
        display: block;
        margin-top: 10px;
        font-weight: bold;
    }
    /* Style for audio buttons */
    .quiz button[aria-label^="Read"] {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1em;
        padding: 0 5px;
        vertical-align: middle;
    }

    /* Ensure all list texts are bold (except quiz lists) */
    .content-section ul li,
    .content-section ol li,
    .resource-links ul li {
      font-weight: bold;
    }
    /* Keep quiz list items normal weight */
    .quiz li {
      font-weight: normal;
    }
    .resource-links a {
      font-weight: bold;
    }



/* Ensure all summary headings (list links) are bold */
summary { font-weight: bold; }

  

  /* Make all textareas taller & wider */
  textarea { min-height: 140px; width: 95%; max-width: 900px; }
  .wide-textarea { width: 98%; max-width: 1000px; }

    /* Popup box styles */
    .popup-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .popup-overlay.active {
      display: flex;
    }
    .popup-box {
      background: #fff;
      padding: 20px;
      border-radius: 5px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      position: relative;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }
    .popup-box a {
      display: inline-block;
      margin-top: 10px;
      background: #007bff;
      color: #fff;
      padding: 10px 15px;
      border-radius: 4px;
      font-weight: bold;
    }
    .popup-box button:not(.close-popup) {
      display: inline-block;
      margin-top: 10px;
      background: #007bff;
      color: #fff;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
    }
    .popup-box button:not(.close-popup):hover {
      background: #0056b3;
    }
    .popup-box button.close-popup {
      background: none;
      border: none;
      position: absolute;
      top: 5px;
      right: 10px;
      font-size: 1.2em;
      cursor: pointer;
    }

</style>

</head>
<body>
<header>
  <h1><b>Stage 5 Industrial Technology Timber - Bedside Table Project</b> - 2025</h1>
  <p>Resources, Projects, and Content for Learning</p>
  <div class="header-image">
    <!-- STAFF: Replace 'sample_project.png' with your project image -->
      <img src="table.png" alt="Bedside Table" style="max-width:300px; width:100%; margin-top:20px; border-radius:5px;" />
    <div class="plan-link" style="margin-top:10px;">
      <!-- STAFF: Update link to your project's plan PDF -->
      <a href="BedsideTablePlan.pdf" style="background:#28a745; color:#fff; padding:10px 15px; border-radius:4px; font-weight:bold; display:inline-block;" target="_blank">Download Project Plan (PDF)</a>
    </div>
  </div>
</header>

<section class="google-classroom" aria-label="Google Classroom Invitation">
  <h2>Join Our Google Classroom</h2>
  <p>Use the code below to join the class and access all online resources:</p>
  <p><strong>Classroom Code: <span style="color:#d9534f; font-size:1.3em;">bedside23</span></strong></p>
  <!-- STAFF: Update the Google Classroom link -->
  <a href="https://classroom.google.com" target="_blank">Join Google Classroom</a>
</section>

<nav aria-label="Main Navigation">
  <a class="nav-link active" data-section="program" href="#program">Subject Program</a>
  <a class="nav-link" data-section="syllabus" href="#syllabus">Syllabus</a>
  <a class="nav-link" data-section="assessment" href="#assessment">Assessments</a>
  <a class="nav-link" data-section="project-unit" href="#project-unit">Bedside Table Project Unit</a>
  <a class="nav-link" data-section="main-theory" href="#main-theory">Main Theory Content</a>
  <a class="nav-link" data-section="support-activities" href="#support-activities">Support Theory Content (Optional)</a>
  <a class="nav-link" data-section="advanced-activities" href="#advanced-activities">Advanced Theory Content (Optional)</a>
</nav>

<main class="content">

<main class="content">
<details>
      <summary><strong>Week 5:</strong> Mortise and Tenon Joints &amp; Bandsaw Safety</summary>
      <article>
        <h4>Theory Content</h4>
        <p>In Week 5, you will deepen your understanding of mortise and tenon joinery, utilising the bandsaw to ensure accuracy and quality in your woodworking. Precise construction techniques and thorough safety practices are paramount.</p>
        <h4>Mortise and Tenon Joints</h4>
        <p>Focus on accurately constructing mortise and tenon joints:</p>
        <ul>
          <li>Carefully measure and mark components to ensure perfect alignment.</li>
          <li>Cut tenons carefully to fit securely into mortises.</li>
          <li>Aim for clean cuts to reduce additional sanding and adjustment.</li>
        </ul>
        <h4>Bandsaw Safety and Operation</h4>
        <p>Effective use of the bandsaw is essential for precision cutting of tenons. Always:</p>
        <ul>
          <li>Wear proper PPE, particularly safety glasses and hearing protection.</li>
          <li>Position the blade guide just above the timber to minimise blade deflection.</li>
          <li>Control the feed rate to avoid binding or twisting the timber.</li>
          <li>Regularly inspect and adjust blade tension and sharpness to ensure optimal performance.</li>
        </ul>
        <h4>Practical Activity</h4>
        <ul>
          <li>Complete mortises accurately using the mortiser.</li>
          <li>Precisely cut tenons using the bandsaw.</li>
          <li>Test-fit joints meticulously, making necessary fine adjustments.</li>
        </ul>
        <h4>Resources</h4>
        <div class="resource-links">
          <ul>
            <li><a href="https://www.youtube.com/watch?v=7LEIipah6T0" target="_blank">Bandsaw Safety Guide (YouTube)</a></li>
            <li><a href="https://www.popularwoodworking.com/joinery/mortise-and-tenon-techniques/" target="_blank">Advanced Mortise and Tenon Techniques</a></li>
          </ul>
        </div>
        <form class="quiz" data-week="5" id="week5-quiz" style="margin-top: 1.5rem;">
          <fieldset>
            <legend><strong>Have you been paying attention? – Week 5 Quiz</strong></legend>
            <ol>
              <li>
                <p>When adjusting the bandsaw blade guide, which position provides the optimal balance between safety and cutting accuracy? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                <label><input name="q1_5" type="radio" value="Eye level"/> Well above eye level for better visibility <button aria-label="Read answer Well above eye level for better visibility" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input data-correct="true" name="q1_5" type="radio" value="Just above"/> Just above the height of the timber <button aria-label="Read answer Just above the height of the timber" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q1_5" type="radio" value="Below"/> Slightly below the timber surface <button aria-label="Read answer Slightly below the timber surface" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q1_5" type="radio" value="Above"/> Several inches above for easier feeding <button aria-label="Read answer Several inches above for easier feeding" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
              </li>
              <li>
                <p>Why is it essential to ensure a precise fit for mortise and tenon joints? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                <label><input name="q2_5" type="radio" value="Simplify"/> It simplifies the assembly process significantly <button aria-label="Read answer It simplifies the assembly process significantly" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q2_5" type="radio" value="Appeal"/> It makes the joint visibly appealing <button aria-label="Read answer It makes the joint visibly appealing" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input data-correct="true" name="q2_5" type="radio" value="Strength"/> It increases joint strength and structural integrity <button aria-label="Read answer It increases joint strength and structural integrity" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q2_5" type="radio" value="No sanding"/> It prevents the need for additional sanding <button aria-label="Read answer It prevents the need for additional sanding" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
              </li>
              <li>
                <p>What combination of PPE provides the best protection when operating a bandsaw? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                <label><input data-correct="true" name="q3_5" type="radio" value="Glasses and hearing"/> Safety glasses and hearing protection <button aria-label="Read answer Safety glasses and hearing protection" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q3_5" type="radio" value="Gloves and dust"/> Gloves and dust mask <button aria-label="Read answer Gloves and dust mask" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q3_5" type="radio" value="Hearing and gloves"/> Hearing protection and gloves <button aria-label="Read answer Hearing protection and gloves" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q3_5" type="radio" value="Dust and apron"/> Dust mask and protective apron <button aria-label="Read answer Dust mask and protective apron" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
              </li>
              <li>
                <p>If the bandsaw blade is causing rough cuts, what is likely the problem? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                <label><input name="q4_5" type="radio" value="Slow"/> Blade speed is too slow <button aria-label="Read answer Blade speed is too slow" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input data-correct="true" name="q4_5" type="radio" value="Dull"/> Blade is dull or incorrectly tensioned <button aria-label="Read answer Blade is dull or incorrectly tensioned" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q4_5" type="radio" value="Slow feed"/> Timber is being fed too slowly <button aria-label="Read answer Timber is being fed too slowly" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q4_5" type="radio" value="Timber"/> Timber type is unsuitable <button aria-label="Read answer Timber type is unsuitable" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
              </li>
              <li>
                <p>If timber begins to twist during cutting, what immediate action should you take? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                <label><input name="q5_5" type="radio" value="Speed up"/> Speed up feeding the timber <button aria-label="Read answer Speed up feeding the timber" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q5_5" type="radio" value="Lower guide"/> Lower the blade guide <button aria-label="Read answer Lower the blade guide" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input data-correct="true" name="q5_5" type="radio" value="Stop"/> Stop cutting immediately and re-evaluate the setup <button aria-label="Read answer Stop cutting immediately and re-evaluate the setup" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q5_5" type="radio" value="Pressure"/> Apply additional pressure to correct the twist <button aria-label="Read answer Apply additional pressure to correct the twist" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
              </li>
              <li>
                <p>What specific characteristic of tenon cutting most significantly reduces the need for later adjustments? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                <label><input name="q6_5" type="radio" value="Quick"/> Cutting as quickly as possible <button aria-label="Read answer Cutting as quickly as possible" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input data-correct="true" name="q6_5" type="radio" value="Steady feed"/> Maintaining controlled, steady feed rates <button aria-label="Read answer Maintaining controlled, steady feed rates" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q6_5" type="radio" value="Harder timber"/> Using harder timber <button aria-label="Read answer Using harder timber" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q6_5" type="radio" value="Wider"/> Cutting wider than initially measured <button aria-label="Read answer Cutting wider than initially measured" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
              </li>
              <li>
                <p>What is the primary reason for regularly checking bandsaw blade tension? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                <label><input data-correct="true" name="q7_5" type="radio" value="Accuracy"/> To maintain cutting accuracy and reduce blade drift <button aria-label="Read answer To maintain cutting accuracy and reduce blade drift" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q7_5" type="radio" value="Speed"/> To increase cutting speed <button aria-label="Read answer To increase cutting speed" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q7_5" type="radio" value="Power"/> To minimise power usage <button aria-label="Read answer To minimise power usage" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q7_5" type="radio" value="Lifespan"/> To extend the life of the timber <button aria-label="Read answer To extend the life of the timber" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
              </li>
              <li>
                <p>When initially test-fitting joints, why is moderate friction desirable? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                <label><input name="q8_5" type="radio" value="Too tight"/> It indicates the joint is too tight <button aria-label="Read answer It indicates the joint is too tight" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q8_5" type="radio" value="Speeds glue"/> It speeds up glue application <button aria-label="Read answer It speeds up glue application" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q8_5" type="radio" value="Frictionless"/> It ensures a completely frictionless fit <button aria-label="Read answer It ensures a completely frictionless fit" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input data-correct="true" name="q8_5" type="radio" value="Balance"/> It shows a good balance between strength and ease of assembly <button aria-label="Read answer It shows a good balance between strength and ease of assembly" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
              </li>
              <li>
                <p>Which condition might directly lead to the bandsaw blade drifting away from the marked line? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                <label><input data-correct="true" name="q9_5" type="radio" value="Tension or wear"/> Incorrect blade tension or worn blade teeth <button aria-label="Read answer Incorrect blade tension or worn blade teeth" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q9_5" type="radio" value="Marking"/> Incorrect timber marking <button aria-label="Read answer Incorrect timber marking" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q9_5" type="radio" value="Soft"/> Timber being too soft <button aria-label="Read answer Timber being too soft" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q9_5" type="radio" value="Slow"/> Cutting at a slow speed <button aria-label="Read answer Cutting at a slow speed" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
              </li>
              <li>
                <p>How should you respond if the bandsaw begins to make unusual noises during cutting? <button aria-label="Read question aloud" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></p>
                <label><input data-correct="true" name="q10_5" type="radio" value="Stop"/> Immediately stop the machine and inspect for problems <button aria-label="Read answer Immediately stop the machine and inspect for problems" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q10_5" type="radio" value="Increase"/> Increase feed speed to overcome the noise <button aria-label="Read answer Increase feed speed to overcome the noise" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q10_5" type="radio" value="Continue"/> Continue cutting slowly until finished <button aria-label="Read answer Continue cutting slowly until finished" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label><br/>
                <label><input name="q10_5" type="radio" value="Lubricate"/> Add lubricant to the blade during operation <button aria-label="Read answer Add lubricant to the blade during operation" onclick="event.preventDefault(); speakText(this)" type="button">🔊</button></label>
              </li>
            </ol>
            <button class="check-btn" type="button" onclick="submitQuiz(this, 'bedside-week5')">Check answers</button>
            <span class="quiz-msg" id="week5-quiz-msg"></span>
          </fieldset>
        </form>
        <h4>Conclusion</h4>
        <p>Combining accurate mortise and tenon joinery with vigilant bandsaw practices strengthens both the safety and quality of your work.</p>
      </article>
      </details>
</main>

<!-- Popup for results -->
<div id="resultPopup" class="popup-overlay" role="dialog" aria-modal="true">
  <div class="popup-box">
    <button class="close-popup" aria-label="Close">&times;</button>
    <h3>Results Submitted</h3>
    <p>You can now visit Google Classroom to record your work.</p>
    <!-- STAFF: Replace href with the project link when available -->
    <a id="popupClassroomLink" href="#" target="_blank">Open Google Classroom</a>
  </div>
</div>

<!-- Popup for entering name -->
<div id="namePopup" class="popup-overlay" role="dialog" aria-modal="true">
  <div class="popup-box">
    <label for="studentName"><b>Please enter your name:</b></label><br/>
    <input type="text" id="studentName" style="margin-top:10px; padding:8px; width:95%;" />
    <button id="submitNameBtn" style="margin-top:10px;">Submit</button>
  </div>
</div>

<script>
    // Script for handling navigation link clicks and toggling active sections
    document.addEventListener('DOMContentLoaded', () => {
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.content-section');

        // Function to set the active section based on URL hash or default
        function setActiveSection() {
            let targetID = window.location.hash.substring(1) || 'program';
            if (!document.getElementById(targetID)) {
                targetID = 'program';
            }

            navLinks.forEach(nav => {
                nav.classList.remove('active');
                if (nav.getAttribute('data-section') === targetID) {
                    nav.classList.add('active');
                }
            });
            sections.forEach(sec => {
                sec.classList.remove('active');
                if (sec.id === targetID) {
                    sec.classList.add('active');
                }
            });
        }

        // Set active section on page load
        setActiveSection();

        // Add click event listeners to navigation links
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetID = link.getAttribute('data-section');
                window.location.hash = targetID;

                navLinks.forEach(nav => nav.classList.remove('active'));
                sections.forEach(sec => sec.classList.remove('active'));

                link.classList.add('active');
                const targetSection = document.getElementById(targetID);
                if (targetSection) {
                    targetSection.classList.add('active');
                    targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Listen for hash changes (e.g., browser back/forward buttons)
        window.addEventListener('hashchange', setActiveSection);
    });
</script>
<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwTomPeDrZ-vDZyEC72wXeoeFpro0Z8zCD2OfgL9HxY7nBsokoieXxy4sT3n_O4x3iqhg/exec";
const CLASSROOM_LINK = "#"; // STAFF: Replace with your Google Classroom link

// Voice setup for text-to-speech
const synth = window.speechSynthesis;
let voices = [];
synth.onvoiceschanged = () => { voices = synth.getVoices(); };

function speakText(btn) {
  let text = '';
  if (btn.dataset.text) {
    text = btn.dataset.text;
  } else {
    const p = btn.closest('p');
    if (p) {
      text = Array.from(p.childNodes)
        .filter(n => n.nodeType === Node.TEXT_NODE)
        .map(n => n.textContent.trim())
        .join(' ');
    } else {
      const lbl = btn.closest('label');
      text = Array.from(lbl.childNodes)
        .filter(n => n.nodeType === Node.TEXT_NODE)
        .map(n => n.textContent.trim())
        .filter(t => t.length)
        .join(' ');
    }
  }
  if (!voices.length) voices = synth.getVoices();
  const utt = new SpeechSynthesisUtterance(text);
  utt.voice = voices.find(v => v.name === 'Google UK English Female')
             || voices.find(v => /Natural/.test(v.name))
             || voices[0];
  synth.speak(utt);
}

function showResultPopup(url) {
  const overlay = document.getElementById('resultPopup');
  const link = document.getElementById('popupClassroomLink');
  if (link) link.href = url || '#';
  if (overlay) overlay.classList.add('active');
}

function askForName() {
  return new Promise(resolve => {
    const overlay = document.getElementById('namePopup');
    const input = document.getElementById('studentName');
    const btn = document.getElementById('submitNameBtn');
    if (!overlay || !input || !btn) { resolve(''); return; }
    overlay.classList.add('active');
    btn.onclick = () => {
      const name = input.value.trim();
      if (!name) return;
      overlay.classList.remove('active');
      resolve(name);
    };
  });
}

document.addEventListener('DOMContentLoaded', () => {
  const closeBtn = document.querySelector('#resultPopup .close-popup');
  if (closeBtn) {
    closeBtn.addEventListener('click', () => {
      document.getElementById('resultPopup').classList.remove('active');
    });
  }
});

function submitQuiz(btn, quizType) {
  const form = btn.closest('form');
  const fieldset = form.querySelector('fieldset');
  let correct = 0, total = 0;
  const results = [];
  fieldset.querySelectorAll('li').forEach((li, idx) => {
    const radios = li.querySelectorAll('input[type=radio]');
    let userCorrect = false, answered = false;
    radios.forEach(radio => {
      if (radio.checked) {
        answered = true;
        if (radio.hasAttribute('data-correct')) userCorrect = true;
      }
      // Reset label
      radio.parentElement.removeAttribute('data-result');
    });
    total += 1;
    // Mark right/wrong visually
    radios.forEach(radio => {
      if (radio.checked) {
        radio.parentElement.setAttribute('data-result', userCorrect ? "right" : "wrong");
      }
    });
    if (userCorrect) correct += 1;
    results.push({
      question: li.querySelector('p').textContent,
      answer: Array.from(radios).find(r => r.checked)?.value || ''
    });
  });
  // Show feedback
  let msg = `You got ${correct} out of ${total} correct.`;
  form.querySelector('.quiz-msg').textContent = msg;

  askForName().then(name => {
    fetch(SCRIPT_URL, {
      method: "POST",
      mode: "cors",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        quizType,
        quiz: results,
        score: correct + "/" + total,
        studentName: name,
        timestamp: new Date().toISOString()
      })
    });
    showResultPopup(CLASSROOM_LINK);
  });
}

function submitAdvancedQuiz(btn, quizType) {
  const form = btn.closest('form');
  const textareas = form.querySelectorAll('textarea');
  const responses = [];
  textareas.forEach((ta) => {
    responses.push({
      question: ta.closest('li').querySelector('p').textContent,
      answer: ta.value.trim()
    });
  });

  const studentName = prompt('Please enter your name to submit your answers:');
  if (!studentName) return;

  form.querySelector('.quiz-msg').textContent =
    'Responses submitted. Your teacher will review them.';

  fetch(SCRIPT_URL, {
    method: 'POST',
    mode: 'cors',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      quizType,
      studentName: studentName.trim(),
      responses,
      timestamp: new Date().toISOString()
    })
  });
  showResultPopup(CLASSROOM_LINK);
}
</script>
</body>
</html>
